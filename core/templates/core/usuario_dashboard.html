{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - SEMUJERES</title>
    <link rel="stylesheet" href="{% static 'core/css/usuario_dashboard.css' %}">
    <link rel="icon" href="{% static 'core/img/zaclogo-removebg-preview.png' %}" type="image/png">
    <script src="https://kit.fontawesome.com/1165876da6.js" crossorigin="anonymous"></script>
    <style>
        footer {
            background-color: #621d28;
            color: #ffffff;
            padding: 15px 10px 5px;
            margin-top: 20px;
            font-size: 12px;
        }
        .footer-container {
            max-width: 950px;
            margin: auto;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        .footer-col {
            flex: 1 1 220px;
            text-align: center;
        }
        .footer-col h3 {
            color: #f1f1f1;
            margin-bottom: 5px;
            font-size: 13px;
            text-transform: uppercase;
        }
        .footer-col p, .footer-col li, .footer-col a {
            font-size: 12px;
            color: #f1f1f1;
            text-decoration: none;
            line-height: 1.4;
            margin: 2px 0;
        }
        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-logo img {
            max-width: 160px;
            margin-bottom: 6px;
        }
        .social-icons {
            margin-top: 5px;
        }
        .social-icons a {
            margin: 0 5px;
            font-size: 14px;
            color: #ffffff;
            transition: opacity 0.3s;
        }
        .social-icons a:hover {
            opacity: 0.7;
        }
        .bottom-bar {
            margin-top: 8px;
            padding: 5px;
            text-align: center;
            font-size: 11px;
            background-color: #621d28;
        }
    </style>
</head>
<body>

    <!-- Barra superior institucional -->
    <div class="barra-superior">
        <div class="barra-izquierda">
            <img src="{% static 'core/img/zaclogo.jpeg' %}" alt="Zacatecas Logo" class="logo-barra">
            <a href="https://zacatecas.gob.mx" class="link-zacatecas" target="_blank">zacatecas.gob.mx</a>
        </div>

        <div class="barra-derecha">
            <a href="{% url 'cambiar_contrasena' %}" class="boton-salir">PERFIL</a>
            <a href="{% url 'logout' %}" class="boton-salir">SALIR</a>
        </div>
    </div>

    <!-- Banner del Modelo -->
    <div class="banner-modelo">
        <img src="{% static 'core/img/modelo_igualdad.jpg' %}" alt="Modelo Igualdad" class="logo-modelo-banner">
    </div>

    <!-- Contenido principal -->
    <main class="contenido">
        <h2>SUBIR DOCUMENTOS</h2>

        <div class="barra-contenedor">
            <p>Documentos validados: {{ porcentaje_validados }}%</p>
            <div class="barra-progreso">
                <div class="barra-relleno 
                    {% if porcentaje_validados < 33 %}
                        rojo
                    {% elif porcentaje_validados < 66 %}
                        amarillo
                    {% else %}
                        verde
                    {% endif %}" style="width:{{ porcentaje_validados }}%">
                </div>
            </div>
        </div>

        <!-- Formulario para subir documentos -->
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <table class="tabla-documentos">
                <thead>
                    <tr>
                        <th>Documento</th>
                        <th>Fecha de Subida</th>
                        <th>Nombre</th>
                        <th>Observaciones</th>
                        <th>Estado</th>
                        <th colspan="2">Archivo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for doc in documentos %}
                    <tr>
                        <td>{{ doc.anexo.nombre }}</td>
                        <td>
                            {% if doc.archivo %}
                                {{ doc.fecha_subida|date:"d-m-Y" }}
                            {% endif %}
                        </td>
                        <td>
                            {% if doc.archivo %}
                                {{ doc.archivo.name|cut:"documentos/"|cut:".pdf" }}
                            {% endif %}
                        </td>
                        <td>{{ doc.observaciones|default:"—" }}</td>
                        <td>{{ doc.get_estado_display }}</td>
                        <td colspan="2">
                            {% if not doc.archivo %}
                                <label for="archivo_{{ doc.id }}" class="upload-icon">
                                    <img src="{% static 'core/img/arrow_upload.png' %}" alt="Subir archivo" width="24" height="24" />
                                </label>
                                <input type="file" id="archivo_{{ doc.id }}" name="documento_{{ doc.id }}" accept=".pdf" class="input-oculto">
                            {% else %}
                                <a href="{{ doc.archivo.url }}" target="_blank">
                                    <img src="{% static 'core/img/visibility.png' %}" alt="Ver archivo" width="24" height="24" />
                                </a>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7">No hay documentos disponibles.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div class="boton-subida">
                <button type="submit">Subir Archivos Seleccionados</button>
            </div>
        </form>
    </main>

    <!-- Footer institucional compacto -->
    <footer>
        <div class="footer-container">
            <!-- Columna 1: Logo + Dirección -->
            <div class="footer-col footer-logo">
                <img src="{% static 'core/img/logo_labsol.png' %}" alt="Logo Zacatecas">
                <p>Circuito Cerro del Gato s/n<br>Ciudad Administrativa</p>
                <p>CP 98160, Zacatecas, Zac.</p>
            </div>

            <!-- Columna 2: Equipo -->
            <div class="footer-col">
                <h3>Equipo</h3>
                <ul>
                    <li>Alejandro Chávez Murillo</li>
                    <li>Jesús Alberto Rodríguez Valencia</li>
                    <li>Karla Guadalupe Rocha Quezada</li>
                </ul>
            </div>

            <!-- Columna 3: Contacto -->
            <div class="footer-col">
                <h3>Contacto</h3>
                <p><i class="fa-solid fa-phone"></i> 492 491 5000</p>
                <p><i class="fa-solid fa-envelope"></i> contacto@zacatecas.gob.mx</p>
                <div class="social-icons">
                    <a href="https://www.facebook.com/gobiernozac/" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="https://twitter.com/gobiernozac" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
                    <a href="https://www.instagram.com/gobiernozac/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://www.youtube.com/user/gobiernozac" target="_blank"><i class="fa-brands fa-youtube"></i></a>
                </div>
            </div>
        </div>

        <!-- Barra inferior -->
        <div class="bottom-bar">
            <p>&copy; 2025 Gobierno del Estado de Zacatecas - Todos los derechos reservados</p>
        </div>
    </footer>

</body>
</html>
